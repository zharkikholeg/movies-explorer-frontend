(this.webpackJsonpmovies=this.webpackJsonpmovies||[]).push([[0],{146:function(e,t,a){},147:function(e,t,a){},148:function(e,t,a){},149:function(e,t,a){},150:function(e,t,a){},151:function(e,t,a){},152:function(e,t,a){},153:function(e,t,a){},154:function(e,t,a){},155:function(e,t,a){},156:function(e,t,a){},157:function(e,t,a){},158:function(e,t,a){"use strict";a.r(t);var c=a(1),s=a.n(c),n=a(42),i=a.n(n),r=(a(50),a(3)),o=(a(51),a(52),a(53),a(54),a(4)),l=a(0);var j=function(e){return console.log(e.loggedIn),e.loggedIn?Object(l.jsxs)("div",{className:"navtab",children:[Object(l.jsx)(o.b,{className:"navtab__link",to:"/movies",children:"\u0424\u0438\u043b\u044c\u043c\u044b"}),Object(l.jsx)(o.b,{className:"navtab__link",to:"/saved-movies",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043d\u044b\u0435 \u0444\u0438\u043b\u044c\u043c\u044b"}),Object(l.jsx)(o.b,{className:"navtab__link",to:"/profile",children:"\u0410\u043a\u043a\u0430\u0443\u043d\u0442"})]}):Object(l.jsxs)("div",{className:"navtab",children:[Object(l.jsx)(o.b,{className:"navtab__link",to:"/signup",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(l.jsx)(o.b,{className:"navtab__link navtab__link_active",to:"/signin",children:"\u0412\u043e\u0439\u0442\u0438"})]})},d=a.p+"static/media/logo.be2d72c0.svg",m=a.p+"static/media/web.872d9c2d.svg";var h=function(e){return Object(l.jsxs)("div",{className:"promo",children:[Object(l.jsxs)("div",{className:"promo__top-container",children:[Object(l.jsx)("img",{src:d,alt:"\u043b\u043e\u0433\u043e\u0442\u0438\u043f",className:"promo__logo"}),Object(l.jsx)(j,{loggedIn:e.loggedIn})]}),Object(l.jsxs)("div",{className:"promo__wrapper",children:[Object(l.jsxs)("div",{className:"promo__wrapper-text",children:[Object(l.jsx)("h2",{className:"promo__heading",children:"\u0423\u0447\u0435\u0431\u043d\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442 \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u0430 \u0444\u0430\u043a\u0443\u043b\u044c\u0442\u0435\u0442\u0430 \u0412\u0435\u0431-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438"}),Object(l.jsx)("h4",{className:"promo__subheading",children:"\u041b\u0438\u0441\u0442\u0430\u0439\u0442\u0435 \u043d\u0438\u0436\u0435, \u0447\u0442\u043e\u0431\u044b \u0443\u0437\u043d\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u043f\u0440\u043e \u044d\u0442\u043e\u0442 \u043f\u0440\u043e\u0435\u043a\u0442 \u0438 \u0435\u0433\u043e \u0441\u043e\u0437\u0434\u0430\u0442\u0435\u043b\u044f"}),Object(l.jsx)("a",{href:"#more",className:"promo__button hover",children:"\u0423\u0437\u043d\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435"})]}),Object(l.jsx)("img",{src:m,alt:"\u0433\u043b\u043e\u0431\u0443\u0441 \u0438\u0437 \u0441\u043b\u043e\u0432 web",className:"promo__img"})]})]})};a(61);var u=function(e){return Object(l.jsxs)("div",{className:"project",id:"more",children:[Object(l.jsx)("h3",{className:"project__heading",children:"\u041e \u041f\u0440\u043e\u0435\u043a\u0442\u0435"}),Object(l.jsx)("div",{className:"project__delimiter"}),Object(l.jsxs)("div",{className:"project__mid-wrapper",children:[Object(l.jsxs)("div",{className:"project__feature",children:[Object(l.jsx)("h4",{className:"project__feature__heading",children:"\u0414\u0438\u043f\u043b\u043e\u043c\u043d\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442 \u0432\u043a\u043b\u044e\u0447\u0430\u043b 5 \u044d\u0442\u0430\u043f\u043e\u0432"}),Object(l.jsx)("p",{className:"project__feature__text",children:"\u0421\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043b\u0430\u043d\u0430, \u0440\u0430\u0431\u043e\u0442\u0443 \u043d\u0430\u0434 \u0431\u044d\u043a\u0435\u043d\u0434\u043e\u043c, \u0432\u0451\u0440\u0441\u0442\u043a\u0443, \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u0438 \u0444\u0438\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0438."})]}),Object(l.jsxs)("div",{className:"project__feature",children:[Object(l.jsx)("h4",{className:"project__feature__heading",children:"\u041d\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0434\u0438\u043f\u043b\u043e\u043c\u0430 \u0443\u0448\u043b\u043e 5 \u043d\u0435\u0434\u0435\u043b\u044c"}),Object(l.jsx)("p",{className:"project__feature__text",children:"\u0423 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u044d\u0442\u0430\u043f\u0430 \u0431\u044b\u043b \u043c\u044f\u0433\u043a\u0438\u0439 \u0438 \u0436\u0451\u0441\u0442\u043a\u0438\u0439 \u0434\u0435\u0434\u043b\u0430\u0439\u043d, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043d\u0443\u0436\u043d\u043e \u0431\u044b\u043b\u043e \u0441\u043e\u0431\u043b\u044e\u0434\u0430\u0442\u044c, \u0447\u0442\u043e\u0431\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0449\u0438\u0442\u0438\u0442\u044c\u0441\u044f."})]})]}),Object(l.jsxs)("div",{className:"project__bar-wrapper",children:[Object(l.jsx)("div",{className:"project__bar-green",children:Object(l.jsx)("p",{className:"project__bar-green__text",children:" 1 \u043d\u0435\u0434\u0435\u043b\u044f"})}),Object(l.jsx)("div",{className:"project__bar-grey",children:Object(l.jsx)("p",{className:"project__bar-grey__text",children:" 4 \u043d\u0435\u0434\u0435\u043b\u0438"})})]}),Object(l.jsxs)("div",{className:"project__subtitles-wrapper",children:[Object(l.jsx)("div",{className:"project__subtitles-small",children:Object(l.jsx)("p",{className:"project__subtitles-text",children:"Back-end"})}),Object(l.jsx)("div",{className:"project__subtitles-big",children:Object(l.jsx)("p",{className:"project__subtitles-text",children:"Front-end"})})]})]})};a(62);var b=function(e){return Object(l.jsxs)("div",{className:"tech",children:[Object(l.jsx)("h3",{className:"tech__heading",children:"\u0422\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0438"}),Object(l.jsx)("div",{className:"project__delimiter"}),Object(l.jsxs)("div",{className:"tech__mid-wrapper",children:[Object(l.jsx)("h2",{className:"tech__big-text",children:"7 \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0439"}),Object(l.jsx)("p",{className:"tech__small-text",children:"\u041d\u0430 \u043a\u0443\u0440\u0441\u0435 \u0432\u0435\u0431-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043c\u044b \u043e\u0441\u0432\u043e\u0438\u043b\u0438 \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u043b\u0438 \u0432 \u0434\u0438\u043f\u043b\u043e\u043c\u043d\u043e\u043c \u043f\u0440\u043e\u0435\u043a\u0442\u0435."}),Object(l.jsxs)("div",{className:"tech__tags-wrapper",children:[Object(l.jsx)("div",{className:"tech__tag",children:Object(l.jsx)("p",{className:"tech__tag__text",children:"HTML"})}),Object(l.jsx)("div",{className:"tech__tag",children:Object(l.jsx)("p",{className:"tech__tag__text",children:"CSS"})}),Object(l.jsx)("div",{className:"tech__tag",children:Object(l.jsx)("p",{className:"tech__tag__text",children:"JS"})}),Object(l.jsx)("div",{className:"tech__tag",children:Object(l.jsx)("p",{className:"tech__tag__text",children:"React"})}),Object(l.jsx)("div",{className:"tech__tag",children:Object(l.jsx)("p",{className:"tech__tag__text",children:"Git"})}),Object(l.jsx)("div",{className:"tech__tag",children:Object(l.jsx)("p",{className:"tech__tag__text",children:"Express.js"})}),Object(l.jsx)("div",{className:"tech__tag",children:Object(l.jsx)("p",{className:"tech__tag__text",children:"mongoDB"})})]})]})]})},_=(a(63),a.p+"static/media/ava.2c4d3a82.jpg");var O=function(e){return Object(l.jsxs)("div",{className:"me",children:[Object(l.jsx)("h3",{className:"tech__heading",children:"\u0421\u0442\u0443\u0434\u0435\u043d\u0442"}),Object(l.jsx)("div",{className:"project__delimiter"}),Object(l.jsxs)("div",{className:"me__wrapper",children:[Object(l.jsxs)("div",{className:"me__text-wrapper",children:[Object(l.jsx)("h2",{className:"me__name",children:"\u041e\u043b\u0435\u0433"}),Object(l.jsx)("p",{className:"me__bio",children:"\u0424\u0440\u043e\u043d\u0442\u0435\u043d\u0434-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a, 26 \u043b\u0435\u0442"}),Object(l.jsx)("p",{className:"me__text",children:"\u042f \u0440\u043e\u0434\u0438\u043b\u0441\u044f \u0438 \u0436\u0438\u0432\u0443 \u0432 \u0421\u0430\u0440\u0430\u0442\u043e\u0432\u0435, \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u043b \u0444\u0430\u043a\u0443\u043b\u044c\u0442\u0435\u0442 \u044d\u043a\u043e\u043d\u043e\u043c\u0438\u043a\u0438 \u0421\u0413\u0423. \u042f \u043b\u044e\u0431\u043b\u044e \u0441\u043b\u0443\u0448\u0430\u0442\u044c \u043c\u0443\u0437\u044b\u043a\u0443, \u0430 \u0435\u0449\u0451 \u0443\u0432\u043b\u0435\u043a\u0430\u044e\u0441\u044c \u0431\u0435\u0433\u043e\u043c. \u041d\u0435\u0434\u0430\u0432\u043d\u043e \u043d\u0430\u0447\u0430\u043b \u043a\u043e\u0434\u0438\u0442\u044c. \u0421 2015 \u0433\u043e\u0434\u0430 \u0440\u0430\u0431\u043e\u0442\u0430\u043b \u0432 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438 \xab\u0421\u041a\u0411 \u041a\u043e\u043d\u0442\u0443\u0440\xbb. \u041f\u043e\u0441\u043b\u0435 \u0442\u043e\u0433\u043e, \u043a\u0430\u043a \u043f\u0440\u043e\u0448\u0451\u043b \u043a\u0443\u0440\u0441 \u043f\u043e \u0432\u0435\u0431-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435, \u043d\u0430\u0447\u0430\u043b \u0437\u0430\u043d\u0438\u043c\u0430\u0442\u044c\u0441\u044f \u0444\u0440\u0438\u043b\u0430\u043d\u0441-\u0437\u0430\u043a\u0430\u0437\u0430\u043c\u0438 \u0438 \u0443\u0448\u0451\u043b \u0441 \u043f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u043e\u0439 \u0440\u0430\u0431\u043e\u0442\u044b."}),Object(l.jsxs)("div",{className:"me__links",children:[Object(l.jsx)("a",{className:"me__link hover",href:"https://www.facebook.com/yandex.practicum/",children:"Facebook"}),Object(l.jsx)("a",{className:"me__link hover",href:"https://github.com/zharkikholeg",children:"Github"})]})]}),Object(l.jsx)("img",{className:"me__ava",src:_,alt:"\u0430\u0432\u0430\u0442\u0430\u0440"})]})]})},v=(a(64),a.p+"static/media/arrow.1c63a7f5.svg");var p=function(e){return Object(l.jsxs)("div",{className:"portfolio",children:[Object(l.jsx)("h3",{className:"portfolio__heading",children:"\u041f\u043e\u0440\u0442\u0444\u043e\u043b\u0438\u043e"}),Object(l.jsxs)("div",{className:"portfolio__unit hover",onClick:function(){return window.open("https://github.com/zharkikholeg/how-to-learn","_blank")},children:[Object(l.jsx)("a",{className:"portfolio__unit__name",children:"\u0421\u0442\u0430\u0442\u0438\u0447\u043d\u044b\u0439 \u0441\u0430\u0439\u0442"}),Object(l.jsx)("img",{className:"portfolio__unit__arrow",src:v,alt:"\u0441\u0442\u0440\u0435\u043b\u043e\u0447\u043a\u0430"}),Object(l.jsx)("div",{className:"portfolio__unit__devider"})]}),Object(l.jsxs)("div",{className:"portfolio__unit hover",onClick:function(){return window.open("https://github.com/zharkikholeg/russian-travel","_blank")},children:[Object(l.jsx)("a",{className:"portfolio__unit__name",children:"\u0410\u0434\u0430\u043f\u0442\u0438\u0432\u043d\u044b\u0439 \u0441\u0430\u0439\u0442"}),Object(l.jsx)("img",{className:"portfolio__unit__arrow",src:v,alt:"\u0441\u0442\u0440\u0435\u043b\u043e\u0447\u043a\u0430"}),Object(l.jsx)("div",{className:"portfolio__unit__devider"})]}),Object(l.jsxs)("div",{className:"portfolio__unit hover",onClick:function(){return window.open("https://github.com/zharkikholeg/react-mesto-api-full ","_blank")},children:[Object(l.jsx)("a",{className:"portfolio__unit__name",children:"\u041e\u0434\u043d\u043e\u0441\u0442\u0440\u0430\u043d\u0438\u0447\u043d\u043e\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435"}),Object(l.jsx)("img",{className:"portfolio__unit__arrow",src:v,alt:"\u0441\u0442\u0440\u0435\u043b\u043e\u0447\u043a\u0430"}),Object(l.jsx)("div",{className:"portfolio__unit__devider"})]})]})};a(65);var g=function(e){return Object(l.jsxs)("footer",{className:"footer",children:[Object(l.jsx)("p",{className:"footer__text",children:"\u0423\u0447\u0435\u0431\u043d\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442 \u042f\u043d\u0434\u0435\u043a\u0441.\u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0443\u043c \u0445 BeatFilm."}),Object(l.jsx)("div",{className:"footer__devider"}),Object(l.jsxs)("div",{className:"footer__wrapper",children:[Object(l.jsx)("p",{className:"footer__year",children:"\xa9 2021"}),Object(l.jsxs)("div",{className:"footer__links",children:[Object(l.jsx)("a",{className:"footer__link hover",href:"https://practicum.yandex.ru/",target:"_blank",children:"\u042f\u043d\u0434\u0435\u043a\u0441.\u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0443\u043c"}),Object(l.jsx)("a",{className:"footer__link hover",href:"https://github.com/zharkikholeg",target:"_blank",children:"Github"}),Object(l.jsx)("a",{className:"footer__link hover",href:"https://www.facebook.com/yandex.practicum/",target:"_blank",children:"Facebook"})]})]})]})};var f=function(e){return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(h,{loggedIn:e.loggedIn}),Object(l.jsx)(u,{}),Object(l.jsx)(b,{}),Object(l.jsx)(O,{}),Object(l.jsx)(p,{}),Object(l.jsx)(g,{})]})},x=a(13),N=a(15),k=a(12),S=a(7),w=(a(23),a(5)),y=a(45),C=a.n(y),I={name:function(e){if(""===e.trim())return"\u0418\u043c\u044f \u044d\u0442\u043e \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"},email:function(e){return""===e.trim()?"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0430\u0434\u0440\u0435\u0441 \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u043e\u0439 \u043f\u043e\u0447\u0442\u044b.":C.a.isEmail(e)?void 0:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0430\u0434\u0440\u0435\u0441"},password:function(e){if(e.trim().length<=5)return"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u044c\u0448\u0435 \u0448\u0435\u0441\u0442\u0438 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"}},M=a(19),L=a(20),E=new(function(){function e(t){Object(M.a)(this,e),this.url=t.url,this.headers=t.headers}return Object(L.a)(e,[{key:"_getResponseData",value:function(e){return e.ok?e.json():Promise.reject(e)}},{key:"register",value:function(e,t,a){return fetch("".concat(this.url,"/signup"),{method:"POST",headers:this.headers,body:JSON.stringify({name:e,email:t,password:a})}).then((function(e){return e.ok?e.json():e})).catch((function(e){console.log(e)}))}},{key:"authorize",value:function(e,t){return fetch("".concat(this.url,"/signin"),{method:"POST",headers:this.headers,body:JSON.stringify({email:e,password:t})}).then((function(e){return e.json()})).then((function(e){if(e.token)return localStorage.setItem("jwt",e.token),e})).catch((function(e){return console.log(e)}))}},{key:"getMe",value:function(e){var t=this;return fetch("".concat(this.url,"/users/me"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return t._getResponseData(e)}))}},{key:"updateMe",value:function(e,t){return fetch("".concat(this.url,"/users/me"),{method:"PATCH",headers:this.headers,body:JSON.stringify({name:e,email:t})}).then((function(e){return e.ok?e.json():e})).catch((function(e){console.log(e)}))}},{key:"addMovie",value:function(e){var t=this,a=e.country,c=e.director,s=e.duration,n=e.year,i=e.description,r=e.image,o=e.trailer,l=e.thumbnail,j=e.nameRU,d=e.nameEN,m=e.movieId;return console.log(a),fetch("".concat(this.url,"/movies"),{method:"POST",headers:this.headers,body:JSON.stringify({country:a,director:c,duration:s,year:n,description:i,image:r,trailer:o,thumbnail:l,nameRU:j,nameEN:d,movieId:m})}).then((function(e){return t._getResponseData(e)}))}},{key:"getMovies",value:function(e){var t=this;return fetch("".concat(this.url,"/movies"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return t._getResponseData(e)}))}},{key:"deleteMovie",value:function(e){var t=this;return fetch("".concat(this.url,"/movies/").concat(e),{method:"DELETE",headers:this.headers}).then((function(e){return t._getResponseData(e)}))}}]),e}())({url:"https://api.olegzdiplom.nomoredomains.rocks",headers:{"Content-Type":"application/json",authorization:"Bearer ".concat(localStorage.getItem("jwt"))}});var F=function(e){var t=Object(c.useState)({}),a=Object(r.a)(t,2),n=a[0],i=a[1],j=Object(c.useState)({}),m=Object(r.a)(j,2),h=m[0],u=m[1],b=Object(c.useState)(!1),_=Object(r.a)(b,2),O=_[0],v=_[1],p=Object(c.useState)(!1),g=Object(r.a)(p,2),f=g[0],y=g[1],C=Object(c.useState)(!1),M=Object(r.a)(C,2),L=M[0],F=M[1],R=Object(w.g)();function A(e){console.log(h);var t=e.target,a=t.name,c=t.value;i(Object(S.a)(Object(S.a)({},n),{},Object(k.a)({},a,c)));h[a];var s=Object(x.a)(h,[a].map(N.a)),r=I[a](c);u(Object(S.a)(Object(S.a)({},s),r&&Object(k.a)({},a,n[a]&&r)))}return s.a.useEffect((function(){0===Object.keys(h).length&&Object.keys(n).length>2?v(!0):v(!1)}),[n,h]),Object(l.jsxs)("form",{className:"register",onSubmit:function(t){t.preventDefault(),O&&E.register(n.name,n.email,n.password).then((function(t){console.log(t),400===t.status?y(!0):409===t.status?F(!0):E.authorize(n.email,n.password).then((function(t){console.log(t),t.token&&(i({}),e.handleLogin(n.email),R.push("/movies"))})).catch((function(e){return console.log(e)}))})).catch((function(e){console.log(e)}))},children:[e.loggedIn&&Object(l.jsx)(w.a,{to:"/movies"}),Object(l.jsx)("img",{src:d,className:"register__logo",alt:"\u043b\u043e\u0433\u043e\u0442\u0438\u043f",onClick:function(){return e.history.push("/")}}),Object(l.jsx)("h1",{className:"register__heading",children:"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c!"}),Object(l.jsx)("p",{className:"register__label",children:"\u0418\u043c\u044f"}),Object(l.jsx)("input",{className:"register__input",type:"text",id:"name",name:"name",onChange:A}),Object(l.jsx)("p",{className:"register__error",children:h.name}),Object(l.jsx)("p",{className:"register__label",children:"Email"}),Object(l.jsx)("input",{className:"register__input",type:"email",id:"email",name:"email",onChange:A}),Object(l.jsx)("p",{className:"register__error",children:h.email}),Object(l.jsx)("p",{className:"register__label",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(l.jsx)("input",{className:"register__input",type:"password",id:"password",name:"password",onChange:A}),Object(l.jsx)("p",{className:"register__error",children:h.password}),f&&Object(l.jsx)("p",{className:"register__error",children:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a"}),L&&Object(l.jsx)("p",{className:"register__error",children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0442\u0430\u043a\u0438\u043c email \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442"}),Object(l.jsx)("input",{className:"register__submit ".concat(O?"":"register__submit_inactive"),type:"submit",value:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}),Object(l.jsxs)("div",{className:"register__footer-wrapper",children:[Object(l.jsx)("p",{className:"register__question",children:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"}),Object(l.jsx)(o.b,{to:"/signin",className:"register__link",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})};a(146);var R=Object(w.i)((function(e){var t=Object(c.useState)({}),a=Object(r.a)(t,2),n=a[0],i=a[1],j=Object(c.useState)({}),m=Object(r.a)(j,2),h=m[0],u=m[1],b=Object(c.useState)(!1),_=Object(r.a)(b,2),O=_[0],v=_[1],p=Object(c.useState)(!1),g=Object(r.a)(p,2),f=g[0],y=g[1];function C(e){console.log(h);var t=e.target,a=t.name,c=t.value;i(Object(S.a)(Object(S.a)({},n),{},Object(k.a)({},a,c)));h[a];var s=Object(x.a)(h,[a].map(N.a)),r=I[a](c);u(Object(S.a)(Object(S.a)({},s),r&&Object(k.a)({},a,n[a]&&r)))}return s.a.useEffect((function(){0===Object.keys(h).length&&Object.keys(n).length>1?v(!0):v(!1)}),[n,h]),Object(l.jsxs)("form",{className:"register",onSubmit:function(t){t.preventDefault(),O&&E.authorize(n.email,n.password).then((function(t){t?(console.log(t),t.token&&(i({}),e.handleLogin(n.email),e.history.push("/movies"))):(console.log("\u043d\u0435\u0432\u0435\u0440\u043d\u044b\u0435 \u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c"),y(!0))})).catch((function(e){return console.log(e)}))},children:[e.loggedIn&&Object(l.jsx)(w.a,{to:"/movies"}),Object(l.jsx)("img",{src:d,className:"register__logo",onClick:function(){return e.history.push("/")},alt:"\u043b\u043e\u0433\u043e\u0442\u0438\u043f"}),Object(l.jsx)("h1",{className:"register__heading",children:"\u0420\u0430\u0434\u044b \u0432\u0438\u0434\u0435\u0442\u044c!"}),Object(l.jsx)("p",{className:"register__label",children:"Email"}),Object(l.jsx)("input",{className:"register__input",type:"email",id:"email",name:"email",value:n.email||"",onChange:C}),Object(l.jsx)("p",{className:"register__error",children:h.email}),Object(l.jsx)("p",{className:"register__label",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(l.jsx)("input",{className:"register__input",type:"password",id:"password",name:"password",value:n.password||"",onChange:C}),Object(l.jsx)("p",{className:"register__error",children:h.password}),f&&Object(l.jsx)("p",{className:"register__error",children:"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0435 \u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c"}),Object(l.jsx)("input",{className:"register__submit ".concat(O?"":"register__submit_inactive"),type:"submit",value:"\u0412\u043e\u0439\u0442\u0438"}),Object(l.jsxs)("div",{className:"register__footer-wrapper",children:[Object(l.jsx)("p",{className:"register__question",children:"\u0415\u0449\u0451 \u043d\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"}),Object(l.jsx)(o.b,{to:"/signup",className:"register__link",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})]})]})})),A=(a(147),a(148),a(149),a.p+"static/media/person.a10dba0e.svg"),T=(a(150),a.p+"static/media/cross.5270bfc0.svg");var z=function(e){var t=Object(w.h)().pathname;return Object(l.jsx)("div",{className:"mobmenu ".concat(e.opened?"mobmenu_active":" "),children:Object(l.jsxs)("div",{className:"mobmenu__container",children:[Object(l.jsx)("img",{src:T,alt:"\u043a\u043d\u043e\u043f\u043a\u0430 \u0437\u0430\u043a\u0440\u044b\u0442\u0438\u044f \u043c\u0435\u043d\u044e",className:"mobmenu__close",onClick:e.handleMenuClose}),Object(l.jsx)(o.b,{className:"mobmenu__link",to:"/",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),Object(l.jsx)(o.b,{className:"mobmenu__link ".concat("/movies"===t?"mobmenu__link_active":" "),to:"/movies",children:"\u0424\u0438\u043b\u044c\u043c\u044b"}),Object(l.jsx)(o.b,{className:"mobmenu__link ".concat("/saved-movies"===t?"mobmenu__link_active":" "),to:"/saved-movies",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0435 \u0444\u0438\u043b\u044c\u043c\u044b"}),Object(l.jsxs)("div",{className:"mobmenu__bottom-wrapper",children:[Object(l.jsx)(o.b,{className:"mobmenu__account",to:"/profile",children:"\u0410\u043a\u043a\u0430\u0443\u043d\u0442"}),Object(l.jsx)("div",{className:"mobmenu__image-wrapper",children:Object(l.jsx)("img",{src:A,alt:"\u0432\u043e\u0439\u0442\u0438",className:"mobmenu__person"})})]})]})})};var D=function(e){var t=Object(c.useState)(!1),a=Object(r.a)(t,2),s=a[0],n=a[1],i=Object(w.g)();return Object(l.jsxs)("nav",{className:"nav",children:[Object(l.jsx)("img",{src:d,alt:"\u043b\u043e\u0433\u043e\u0442\u0438\u043f",className:"nav__logo",onClick:function(){return i.push("/")}}),Object(l.jsxs)("div",{className:"nav__middle",children:[Object(l.jsx)(o.b,{className:"nav__link",to:"/movies",children:"\u0424\u0438\u043b\u044c\u043c\u044b"}),Object(l.jsx)(o.b,{className:"nav__link",to:"/saved-movies",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043d\u044b\u0435 \u0444\u0438\u043b\u044c\u043c\u044b"})]}),Object(l.jsxs)("div",{className:"nav__right",children:[Object(l.jsx)(o.b,{className:"nav__account",to:"/profile",children:"\u0410\u043a\u043a\u0430\u0443\u043d\u0442"}),Object(l.jsx)("div",{className:"nav__image-wrapper",children:Object(l.jsx)("img",{src:A,alt:"\u0432\u043e\u0439\u0442\u0438",className:"nav__person"})}),Object(l.jsxs)("div",{className:"nav__burger",onClick:function(){n(!0)},children:[Object(l.jsx)("div",{className:"nav__burger__line"}),Object(l.jsx)("div",{className:"nav__burger__line"}),Object(l.jsx)("div",{className:"nav__burger__line"})]})]}),Object(l.jsx)(z,{opened:s,handleMenuClose:function(){n(!1)}})]})};var J=function(e){return Object(l.jsx)("header",{className:"header",children:Object(l.jsx)(D,{})})},P=(a(151),a.p+"static/media/search.3f4581a2.svg"),B=a.p+"static/media/tumb.254b6755.svg";var U=function(e){return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("form",{className:"search",onSubmit:e.handleSearchSubmit,children:[Object(l.jsxs)("div",{className:"search__left",children:[Object(l.jsx)("img",{src:P,className:"search__icon",alt:"\u0438\u043a\u043e\u043d\u043a\u0430 \u043f\u043e\u0438\u0441\u043a\u0430"}),Object(l.jsx)("input",{className:"search__input",placeholder:"\u0424\u0438\u043b\u044c\u043c",type:"text",id:"film",name:"film",onChange:e.handleSearchChange,value:e.searchValue}),Object(l.jsx)("input",{className:"search__submit hover",type:"submit",value:"\u041d\u0430\u0439\u0442\u0438"})]}),Object(l.jsxs)("div",{className:"search__right",children:[Object(l.jsx)("div",{className:"search__devider"}),Object(l.jsx)("div",{className:"search__slider ".concat(e.shortActive?"search__slider_active":""),onClick:e.handleShortClick,children:Object(l.jsx)("img",{src:B,className:"search__tumb ".concat(e.shortActive?"search__tumb_active":""),alt:"\u0442\u0443\u043c\u0431\u043b\u0435\u0440 \u043f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0430\u0442\u0435\u043b\u044f"})}),Object(l.jsx)("div",{className:"search__short",children:"\u041a\u043e\u0440\u043e\u0442\u043a\u043e\u043c\u0435\u0442\u0440\u0430\u0436\u043a\u0438"})]})]}),Object(l.jsx)("div",{className:"search__delimiter"})]})},V=(a(152),function(e){return e.preloader?Object(l.jsx)("div",{className:"preloader",children:Object(l.jsx)("div",{className:"preloader__container",children:Object(l.jsx)("span",{className:"preloader__round"})})}):Object(l.jsx)(l.Fragment,{})}),G=(a(153),a(154),a.p+"static/media/like_active.12bee29d.svg"),q=a.p+"static/media/like_inactive.c2041ece.svg";var H=function(e){var t=null;t="/saved-movies"===Object(w.h)().pathname?T:G;var a=null;a="/saved-movies"===Object(w.h)().pathname?e.card.image:"https://api.nomoreparties.co".concat(e.card.image.url);var c="".concat(Math.floor(e.card.duration/60),"\u0447 ").concat(e.card.duration%60,"\u043c");return Object(l.jsxs)("div",{className:"card",children:[Object(l.jsxs)("div",{className:"card__text",children:[Object(l.jsx)("h5",{className:"card__name",onClick:function(){return window.open(e.card.trailerLink,"_blank")},children:e.card.nameRU}),Object(l.jsx)("p",{className:"card__time",children:c}),Object(l.jsx)("img",{src:e.liked?t:q,alt:"\u043a\u043d\u043e\u043f\u043a\u0430 \u043b\u0430\u0439\u043a\u0430",className:"card__like",onClick:function(){e.handleLike(e.card)}})]}),Object(l.jsx)("img",{src:a,alt:"\u0441\u043a\u0440\u0438\u043d\u0448\u043e\u0442 \u0444\u0438\u043b\u044c\u043c\u0430 ".concat(e.name),className:"card__img",onClick:function(){return window.open(e.card.trailerLink,"_blank")}})]})};var W=function(e){var t=s.a.useState(7),a=Object(r.a)(t,2),c=a[0],n=a[1],i=s.a.useState(7),o=Object(r.a)(i,2),j=o[0],d=o[1],m=e.likedMovies,h=function(){window.innerWidth<480?(n(5),d(5)):(n(7),d(7))};s.a.useEffect((function(){return h(),window.addEventListener("resize",h),function(){window.removeEventListener("resize",h)}}),[]);var u=Object(w.h)().pathname;return Object(l.jsxs)("div",{className:"cards",children:[e.showError?Object(l.jsx)("p",{className:"cards__error",children:"\u0412\u043e \u0432\u0440\u0435\u043c\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e, \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u0441 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435\u043c \u0438\u043b\u0438 \u0441\u0435\u0440\u0432\u0435\u0440 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d. \u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435 \u043d\u0435\u043c\u043d\u043e\u0433\u043e \u0438 \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437"}):Object(l.jsx)(l.Fragment,{}),e.notFound?Object(l.jsx)("p",{className:"cards__notfound",children:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"}):Object(l.jsx)(l.Fragment,{}),e.movies.map((function(t){return Object(l.jsx)(H,{card:t,liked:m.some((function(e){return e.movieId===t.id||e.movieId===t.movieId})),handleLike:e.handleLike},"/movies"===u?t.id:t.movieId)})).slice(0,c),e.movies.length>c?Object(l.jsx)("div",{className:"cards__more",onClick:function(){n(c+j)},children:Object(l.jsx)("p",{className:"cards__more__text",children:"\u0415\u0449\u0451"})}):Object(l.jsx)(l.Fragment,{})]})},K=new(function(){function e(t){Object(M.a)(this,e),this.url=t.url,this.headers=t.headers}return Object(L.a)(e,[{key:"getAllMovies",value:function(){return fetch(this.url,{method:"GET",headers:this.headers}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}}]),e}())({url:"https://api.nomoreparties.co/beatfilm-movies",headers:{"Content-Type":"application/json"}});var Q=function(e){var t=s.a.useState([]),a=Object(r.a)(t,2),c=a[0],n=a[1],i=s.a.useState([]),o=Object(r.a)(i,2),j=o[0],d=o[1],m=s.a.useState([]),h=Object(r.a)(m,2),u=h[0],b=h[1],_=s.a.useState(!1),O=Object(r.a)(_,2),v=O[0],p=O[1],f=s.a.useState(""),x=Object(r.a)(f,2),N=x[0],k=x[1],S=s.a.useState(!1),w=Object(r.a)(S,2),y=w[0],C=w[1],I=s.a.useState(!1),M=Object(r.a)(I,2),L=M[0],F=M[1],R=s.a.useState(!1),A=Object(r.a)(R,2),T=A[0],z=A[1];function D(e,t,a){localStorage.setItem("searchResult",JSON.stringify(e)),localStorage.setItem("searchValue",t),localStorage.setItem("shortActive",a)}return s.a.useEffect((function(){e.tokenCheck();var t=localStorage.getItem("jwt");e.getMovies(t),function(){var e=JSON.parse(localStorage.getItem("searchResult")),t=localStorage.getItem("searchValue"),a="true"===localStorage.getItem("shortActive");if(null!=e)if(b(e),k(t),C(a),a){var c=e.filter((function(e){return e.duration<41}));d(c)}else d(e);else p(!0),K.getAllMovies().then((function(e){d(e),p(!1)}))}(),function(){var t=localStorage.getItem("jwt");E.getMe(t).then((function(t){t&&e.updateContext(t)}))}()}),[]),Object(l.jsxs)("div",{className:"movies",children:[Object(l.jsx)(J,{}),Object(l.jsx)(U,{handleSearchChange:function(e){k(e.target.value),localStorage.setItem("searchValue",e.target.value)},handleSearchSubmit:function(e){if(e.preventDefault(),C(!1),p(!0),console.log(N),0!==c.length){var t=c.filter((function(e){return e.nameRU.toLowerCase().includes(N.toLowerCase())}));0===t.length?z(!0):z(!1),b(t),d(t),p(!1),D(t,N,y)}else K.getAllMovies().then((function(e){n(e),console.log(c),localStorage.setItem("allMovies",JSON.stringify(e));var t=e.filter((function(e){return e.nameRU.toLowerCase().includes(N.toLowerCase())}));0===t.length?z(!0):z(!1),b(t),d(t),p(!1),D(t,N,y)})).catch((function(e){F(!0)}))},shortActive:y,handleShortClick:function(){if(y)console.log("\u043d\u0443\u0436\u043d\u043e \u0443\u0431\u0440\u0430\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440"),d(u);else{console.log("\u043d\u0443\u0436\u043d\u043e \u043e\u0442\u0444\u0438\u043b\u044c\u0442\u0440\u043e\u0432\u0430\u0442\u044c"),console.log(u);var e=u.filter((function(e){return e.duration<41}));d(e)}localStorage.setItem("shortActive",!y),C(!y)},showError:L,searchValue:N}),Object(l.jsx)(V,{preloader:v}),Object(l.jsx)(W,{movies:j,notFound:T,handleLike:e.handleLike,likedMovies:e.likedMovies}),Object(l.jsx)(g,{})]})},X=(a(155),s.a.createContext());var Y=function(e){var t=Object(c.useContext)(X),a=Object(c.useState)(!1),s=Object(r.a)(a,2),n=s[0],i=s[1],o=Object(c.useState)(!1),j=Object(r.a)(o,2),d=j[0],m=j[1],h=Object(c.useState)({name:t[0].name,email:t[0].email}),u=Object(r.a)(h,2),b=u[0],_=u[1],O=Object(c.useState)({}),v=Object(r.a)(O,2),p=v[0],f=v[1],y=Object(w.g)();function C(e){var t=e.target,a=t.name,c=t.value;_(Object(S.a)(Object(S.a)({},b),{},Object(k.a)({},a,c)));p[a];var s=Object(x.a)(p,[a].map(N.a)),n=I[a](c);f(Object(S.a)(Object(S.a)({},s),n&&Object(k.a)({},a,b[a]&&n)))}return Object(c.useEffect)((function(){p&&0===Object.keys(p).length&&Object.keys(b).length>1&&(b.name!==t[0].name||b.email!==t[0].email?(console.log(b.name!==t[0].name),console.log(b.email!==t[0].email),m(!0)):m(!1))}),[p,t.email,t.name,b.email,b.name]),Object(l.jsxs)("div",{className:"profile",children:[Object(l.jsx)(J,{}),Object(l.jsxs)("form",{className:"profile__wrapper",onSubmit:function(e){e.preventDefault(),d&&E.updateMe(b.name,b.email).then((function(e){console.log(e),409==e.status?(console.log("email error"),i(!0)):window.location.reload()}))},children:[Object(l.jsxs)("h2",{className:"profile__greeting",children:["\u041f\u0440\u0438\u0432\u0435\u0442, ",t[0].name]}),Object(l.jsxs)("div",{className:"profile__input-wrapper",children:[Object(l.jsx)("p",{className:"profile__label",children:"\u0418\u043c\u044f"}),Object(l.jsx)("input",{className:"profile__input",type:"text",id:"name",name:"name",value:b.name,onChange:C})]}),Object(l.jsx)("div",{className:"profile__devider"}),Object(l.jsxs)("div",{className:"profile__input-wrapper",children:[Object(l.jsx)("p",{className:"profile__label",children:"Email"}),Object(l.jsx)("input",{className:"profile__input",type:"email",id:"email",name:"email",value:b.email,onChange:C})]}),Object(l.jsx)("input",{className:"profile__submit ".concat(d?"profile__submit_active hover":""),type:"submit",value:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}),n&&Object(l.jsx)("p",{className:"register__error",children:"\u0412\u0432\u0435\u0434\u0435\u043d\u043d\u044b\u0439 \u0432\u0430\u043c\u0438 email \u043f\u0440\u0438\u043d\u0430\u0434\u043b\u0435\u0436\u0438\u0442 \u0434\u0440\u0443\u0433\u043e\u043c\u0443 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044e"}),Object(l.jsx)("p",{className:"profile__exit hover",onClick:function(){localStorage.clear(),e.handleLogout(),y.push("/")},children:"\u0412\u044b\u0439\u0442\u0438 \u0438\u0437 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430"})]}),Object(l.jsx)(g,{})]})};a(156);var Z=function(e){var t=Object(w.g)();return console.log(t),console.log("page rendered"),Object(l.jsxs)("div",{className:"notfound",children:[Object(l.jsx)("p",{className:"notfound__code",children:"404"}),Object(l.jsx)("p",{className:"notfound__text",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"}),Object(l.jsx)("p",{className:"notfound__link",onClick:function(){t.go(-2)},children:"\u041d\u0430\u0437\u0430\u0434"})]})};a(157);var $=function(e){var t=s.a.useState(!1),a=Object(r.a)(t,2),c=a[0],n=(a[1],s.a.useState(!1)),i=Object(r.a)(n,2),o=i[0];return i[1],console.log(e.likedMovies),Object(l.jsxs)("div",{className:"saved-movies",children:[Object(l.jsx)(J,{}),Object(l.jsx)(U,{handleSearchChange:e.handleSavedSearchChange,handleSearchSubmit:e.handleSavedSearchSubmit,shortActive:e.shortActive,handleShortClick:e.handleShortClick,showError:o,searchValue:e.savedSearchValue}),Object(l.jsx)(V,{preloader:c}),Object(l.jsx)(W,{movies:e.likedMovies,notFound:!1,handleLike:e.handleLike,likedMovies:e.likedMovies}),Object(l.jsx)(g,{})]})},ee=["component"],te=function(e){var t=e.component,a=Object(x.a)(e,ee);return Object(l.jsx)(w.b,{children:function(){return a.loggedIn?Object(l.jsx)(t,Object(S.a)({},a)):Object(l.jsx)(w.a,{to:"./signin"})}})};var ae=Object(w.i)((function(e){var t=Object(c.useState)(!1),a=Object(r.a)(t,2),s=a[0],n=a[1],i=Object(c.useState)({}),o=Object(r.a)(i,2),j=o[0],d=o[1],m=Object(w.g)(),h=Object(w.h)(),u=Object(c.useState)([]),b=Object(r.a)(u,2),_=b[0],O=b[1],v=Object(c.useState)([]),p=Object(r.a)(v,2),g=p[0],x=p[1],N=Object(c.useState)([]),k=Object(r.a)(N,2),S=k[0],y=k[1],C=Object(c.useState)(""),I=Object(r.a)(C,2),M=I[0],L=I[1],A=Object(c.useState)(!1),T=Object(r.a)(A,2),z=T[0],D=T[1];function J(){n(!0)}function P(){if(s)m.push(h);else if(localStorage.getItem("jwt")){var e=localStorage.getItem("jwt");E.getMe(e).then((function(e){e&&(n(!0),d(e),m.push(h))}))}}function B(e){var t=localStorage.getItem("jwt"),a=_.some((function(t){return t.movieId===e.id||t.movieId===e.movieId}));console.log(a),a?_.some((function(a){return a.movieId===e.id||a.movieId===e.movieId?E.deleteMovie(a._id).then((function(){U(t),x([])})).catch((function(e){console.log(e)})):""})):E.addMovie({country:e.country,director:e.director,duration:e.duration,year:e.year,description:e.description,image:"https://api.nomoreparties.co".concat(e.image.url),trailer:e.trailerLink,nameRU:e.nameRU,nameEN:e.nameEN,thumbnail:"https://api.nomoreparties.co".concat(e.image.url),movieId:e.id}).then((function(){U(t)})).catch((function(e){console.log(e)}))}Object(c.useEffect)((function(){P()}),[]);var U=function(e){E.getMovies(e).then((function(e){localStorage.setItem("saved",JSON.stringify(e));var t=e,a=localStorage.getItem("jwt");E.getMe(a).then((function(e){var a=t.filter((function(t){return t.owner==e[0]._id}));console.log("getMovies called"),O(a),x(a),y(a),localStorage.setItem("saved",JSON.stringify(a))})).catch((function(e){return console.log(e)}))})).catch((function(e){return console.log(e)}))};return Object(l.jsx)("div",{className:"page",children:Object(l.jsx)(X.Provider,{value:j,children:Object(l.jsxs)(w.d,{children:[Object(l.jsx)(w.b,{exact:!0,path:"/",children:Object(l.jsx)(f,{loggedIn:s})}),Object(l.jsx)(te,{path:"/movies",component:Q,loggedIn:s,handleLike:B,likedMovies:_,tokenCheck:P,updateContext:function(e){d(e)},getMovies:U}),Object(l.jsx)(te,{path:"/saved-movies",component:$,loggedIn:s,handleLike:B,likedMovies:S,handleSavedSearchSubmit:function(e){e.preventDefault(),D(!1),console.log("search");var t=_.filter((function(e){return e.nameRU.toLowerCase().includes(M.toLowerCase())}));x(t),y(t)},handleSavedSearchChange:function(e){L(e.target.value)},savedSearchValue:M,handleShortClick:function(){if(z)y(g);else{var e=g.filter((function(e){return e.duration<41}));y(e)}D(!z)},shortActive:z}),Object(l.jsx)(te,{path:"/profile",component:Y,loggedIn:s,handleLogout:function(){n(!1)}}),Object(l.jsx)(w.b,{path:"/signup",children:Object(l.jsx)(F,{handleLogin:J,loggedIn:s})}),Object(l.jsx)(w.b,{path:"/signin",children:Object(l.jsx)(R,{handleLogin:J,loggedIn:s,tokenCheck:P})}),Object(l.jsx)(w.b,{path:"*",children:Object(l.jsx)(Z,{})})]})})})})),ce=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,159)).then((function(t){var a=t.getCLS,c=t.getFID,s=t.getFCP,n=t.getLCP,i=t.getTTFB;a(e),c(e),s(e),n(e),i(e)}))};i.a.render(Object(l.jsx)(s.a.StrictMode,{children:Object(l.jsx)(o.a,{children:Object(l.jsx)(ae,{})})}),document.getElementById("root")),ce()},23:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){}},[[158,1,2]]]);
//# sourceMappingURL=main.5e3e2913.chunk.js.map